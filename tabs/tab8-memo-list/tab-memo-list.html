<!-- UniversalTaskManagerコンテナ -->
<div id="memoTaskManager"></div>

<!-- メモ統計（UniversalTaskManagerと連携） -->
<div class="input-card" id="memoStats">
    <h3>📊 メモ統計</h3>
    <div id="memoStatsArea" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px;">
        <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
            <div id="totalMemoCount" style="font-size: 24px; font-weight: bold; color: #007bff;">0</div>
            <div style="font-size: 12px; color: #6c757d;">総メモ数</div>
        </div>
        <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
            <div id="todayMemoCount" style="font-size: 24px; font-weight: bold; color: #28a745;">0</div>
            <div style="font-size: 12px; color: #6c757d;">今日のメモ</div>
        </div>
        <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
            <div id="weekMemoCount" style="font-size: 24px; font-weight: bold; color: #ffc107;">0</div>
            <div style="font-size: 12px; color: #6c757d;">今週のメモ</div>
        </div>
        <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
            <div id="priorityMemoCount" style="font-size: 24px; font-weight: bold; color: #dc3545;">0</div>
            <div style="font-size: 12px; color: #6c757d;">重要度S・A</div>
        </div>
    </div>
</div>

<!-- 既存のメモ表示機能（UniversalTaskManager移行後は削除予定） -->
<div style="display: none;">
    <!-- メモ追加エリア -->
    <div class="input-card" id="memoInput">
        <h3>📝 メモリスト</h3>
        
        <!-- メモ入力フォーム -->
        <div style="margin-bottom: 15px;">
            <textarea id="newMemoText" placeholder="考えたこと、やりたいこと、なんでも自由に書いてください..." 
                style="width: 100%; max-width: 600px; height: 100px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; resize: vertical; font-family: inherit; font-size: 14px; line-height: 1.4;"></textarea>
        </div>

        <!-- カテゴリ・重要度・対応時間の選択 -->
        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px; flex-wrap: wrap;">
            <label style="font-weight: bold;">🏷️ カテゴリ（任意）:</label>
            <select id="memoCategory" style="padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
                <option value="">選択なし</option>
                <option value="アイデア">💡 アイデア</option>
                <option value="やること">✅ やること</option>
                <option value="考え事">🤔 考え事</option>
                <option value="メモ">📝 メモ</option>
                <option value="重要">⚠️ 重要</option>
                <option value="その他">📋 その他</option>
            </select>
        </div>

        <!-- 重要度選択 -->
        <div style="margin-bottom: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 8px;">🎯 重要度:</label>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button type="button" class="priority-btn" data-priority="" onclick="selectPriority('')" style="background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 1;">なし</button>
                <button type="button" class="priority-btn" data-priority="S" onclick="selectPriority('S')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🔥 S</button>
                <button type="button" class="priority-btn" data-priority="A" onclick="selectPriority('A')" style="background: #fd7e14; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">⚡ A</button>
                <button type="button" class="priority-btn" data-priority="B" onclick="selectPriority('B')" style="background: #ffc107; color: #212529; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">📋 B</button>
                <!-- <button type="button" class="priority-btn" data-priority="C" onclick="selectPriority('C')" style="background: #6c757d; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">📝 C</button> -->
            </div>
            <input type="hidden" id="memoPriority" value="">
        </div>

        <!-- 対応時間選択 -->
        <div style="margin-bottom: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 8px;">⏰ 対応時間:</label>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button type="button" class="timeframe-btn" data-timeframe="" onclick="selectTimeframe('')" style="background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 1;">なし</button>
                <button type="button" class="timeframe-btn" data-timeframe="短期" onclick="selectTimeframe('短期')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">⚡ 短期</button>
                <button type="button" class="timeframe-btn" data-timeframe="中長期" onclick="selectTimeframe('中長期')" style="background: #17a2b8; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">📅 中長期</button>
            </div>
            <input type="hidden" id="memoTimeframe" value="">
        </div>

        <!-- 追加ボタン -->
        <div style="text-align: center;">
            <button onclick="addMemo()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">➕ メモを追加</button>
        </div>
    </div>

    <!-- メモ一覧表示 -->
    <div class="input-card" id="memoList">
        <h3 style="display: flex; justify-content: space-between; align-items: center;">
            <span>📋 メモ一覧</span>
            <div style="display: flex; align-items: center; gap: 5px;">
                <span id="filterCount" style="font-size: 12px; color: #666;"></span>
                <button class="universal-copy-btn" onclick="copyAllMemos()" style="background: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">📋 全メモをコピー</button>
                <button id="integrationModeBtn" onclick="toggleIntegrationMode()" style="background: #6c757d; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">🔗 統合モード</button>
                <button id="executeIntegrationBtn" onclick="executeIntegration()" style="background: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 12px; display: none; opacity: 0.5;" disabled>⚡ 統合実行</button>
            </div>
        </h3>
        
        <!-- フィルター機能 -->
        <div style="margin-bottom: 15px;">
            <div style="display: flex; gap: 8px; align-items: center;">
                <input type="text" id="memoFilter" placeholder="🔍 メモを検索..." 
                    oninput="filterMemos()" 
                    style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
                <button onclick="clearFilter()" style="background: #6c757d; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 12px;">✕</button>
            </div>
        </div>
        
        <div class="data-area" id="memoListArea">
            まだメモがありません
        </div>
    </div>

    <!-- メモ統計 -->
    <div class="input-card" id="memoStats">
        <h3>📊 メモ統計</h3>
        <div id="memoStatsArea" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px;">
            <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                <div id="totalMemoCount" style="font-size: 24px; font-weight: bold; color: #007bff;">0</div>
                <div style="font-size: 12px; color: #6c757d;">総メモ数</div>
            </div>
            <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                <div id="todayMemoCount" style="font-size: 24px; font-weight: bold; color: #28a745;">0</div>
                <div style="font-size: 12px; color: #6c757d;">今日のメモ</div>
            </div>
            <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                <div id="weekMemoCount" style="font-size: 24px; font-weight: bold; color: #ffc107;">0</div>
                <div style="font-size: 12px; color: #6c757d;">今週のメモ</div>
            </div>
            <div style="text-align: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                <div id="priorityMemoCount" style="font-size: 24px; font-weight: bold; color: #dc3545;">0</div>
                <div style="font-size: 12px; color: #6c757d;">重要度S・A</div>
            </div>
        </div>
    </div>
</div>