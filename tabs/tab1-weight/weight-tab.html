<!-- 体重管理専用コンテンツ（オリジナルレイアウト） -->
<div class="weight-input" id="weightInput">
    <div class="input-card">
        <h3 style="margin-top: 0; margin-bottom: 8px;">📝 データを記録</h3>
        <div style="display: flex; align-items: center; gap: 8px;">
            <input type="date" class="input-field" id="dateInput" style="flex: 1; min-width: 140px;">
            <input type="number" class="input-field" id="weightValue" placeholder="値" step="0.1" min="0" max="300" value="72.0" style="flex: 1; min-width: 100px;" onkeydown="handleWeightKeypress(event)">
            <span style="font-size: 11px; color: #666; white-space: nowrap;">↑↓で調整</span>
        </div>
        
        <!-- タイミング選択パネル -->
        <div class="timing-panel">
            <div style="text-align: center; margin-bottom: 8px;">
                <span style="font-size: 13px; color: #444; font-weight: bold;">⏰ タイミング</span>
            </div>
            <div class="timing-buttons" id="timingButtons">
                <button type="button" class="timing-btn" onclick="selectTiming('起床後')" data-timing="起床後" style="background: #55a3ff;">🛏️ 起床後</button>
                <button type="button" class="timing-btn" onclick="selectTiming('トイレ前')" data-timing="トイレ前" style="background: #81ecec;">🚽 トイレ前</button>
                <button type="button" class="timing-btn" onclick="selectTiming('トイレ後')" data-timing="トイレ後" style="background: #74b9ff;">🚽 トイレ後</button>
                <button type="button" class="timing-btn" onclick="selectTiming('風呂前')" data-timing="風呂前" style="background: #fd79a8;">🛁 風呂前</button>
                <button type="button" class="timing-btn" onclick="selectTiming('風呂後')" data-timing="風呂後" style="background: #00b894;">🛀 風呂後</button>
                <button type="button" class="timing-btn" onclick="selectTiming('食事前')" data-timing="食事前" style="background: #e84393;">🍽️ 食事前</button>
                <button type="button" class="timing-btn" onclick="selectTiming('食事後')" data-timing="食事後" style="background: #a29bfe;">🍽️ 食事後</button>
            </div>
            <input type="text" class="input-field" id="selectedTiming" placeholder="タイミング" readonly style="margin-top: 5px; font-size: 12px; padding: 6px; text-align: center; background: #f0f8ff;">
        </div>
        
        <!-- 服装記録パネル (復活+改良版) -->
        <div class="clothing-panel" style="background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; padding: 8px; margin: 5px 0;">
            <h4 style="margin: 2px 0 5px 0; font-size: 13px; text-align: center;">👕 服装記録</h4>
            
            <!-- 上半身 -->
            <div style="margin: 3px 0;">
                <div style="text-align: center; margin-bottom: 3px;">
                    <span style="font-size: 11px; color: #444;">上:</span>
                </div>
                <div id="topClothingButtons" style="display: flex; gap: 3px; flex-wrap: wrap; justify-content: center;">
                    <button type="button" class="clothing-btn" onclick="selectClothingTop('なし')" data-clothing-top="なし" style="background: #e0e0e0; color: #424242;">❌ なし</button>
                    <button type="button" class="clothing-btn" onclick="selectClothingTop('下着シャツ')" data-clothing-top="下着シャツ" style="background: #87ceeb; color: #2f4f4f;">👕 下着シャツ</button>
                    <button type="button" class="clothing-btn" onclick="selectClothingTop('ワイシャツ')" data-clothing-top="ワイシャツ" style="background: #add8e6; color: #2f4f4f;">👔 ワイシャツ</button>
                </div>
                <input type="text" class="input-field" id="selectedTop" placeholder="上" readonly style="margin-top: 2px; font-size: 10px; padding: 4px; text-align: center; background: #ffffff;">
            </div>
            
            <!-- 下半身 -->
            <div style="margin: 3px 0;">
                <div style="text-align: center; margin-bottom: 3px;">
                    <span style="font-size: 11px; color: #444;">下:</span>
                </div>
                <div id="bottomClothingButtons" style="display: flex; gap: 3px; flex-wrap: wrap; justify-content: center;">
                    <button type="button" class="clothing-btn" onclick="selectClothingBottom('なし')" data-clothing-bottom="なし" style="background: #e0e0e0; color: #424242;">❌ なし</button>
                    <button type="button" class="clothing-btn" onclick="selectClothingBottom('トランクス')" data-clothing-bottom="トランクス" style="background: #dda0dd; color: #4b0082;">🩲 トランクス</button>
                    <button type="button" class="clothing-btn" onclick="selectClothingBottom('ハーフパンツ')" data-clothing-bottom="ハーフパンツ" style="background: #f0e68c; color: #8b4513;">🩳 ハーフパンツ</button>
                </div>
                <input type="text" class="input-field" id="selectedBottom" placeholder="下" readonly style="margin-top: 2px; font-size: 10px; padding: 4px; text-align: center; background: #ffffff;">
            </div>
        </div>
        
        <textarea class="input-field" id="memoInput" placeholder="メモ (オプション)" rows="2"></textarea>
        <button class="save-button" onclick="saveWeightData()">💾 保存</button>
    </div>
</div>

<!-- グラフパネル -->
<div class="input-card" id="chartPanel">
    <h3>📊 データ推移グラフ</h3>
    <div style="position: relative; height: 300px;">
        <canvas id="weightChart"></canvas>
    </div>
    
    <!-- 期間選択とナビゲーション -->
    <div style="margin-top: 10px;">
        <!-- 期間選択ボタン -->
        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 8px;">
            <button onclick="updateChartRange(1)" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">1日</button>
            <button onclick="updateChartRange(7)" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">1週間</button>
            <button onclick="updateChartRange(30)" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">1ヶ月</button>
            <button onclick="updateChartRange(90)" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">3ヶ月</button>
            <button onclick="updateChartRange(365)" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">1年</button>
            <button onclick="updateChartRange(0)" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">全期間</button>
            <button id="previousPeriodBtn" onclick="togglePreviousPeriod()" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">前期間の記録</button>
        </div>
        
        <!-- ナビゲーションボタン -->
        <div style="display: flex; gap: 5px; margin-bottom: 8px; justify-content: center;">
            <button onclick="goToPreviousWeek()" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">← 前週</button>
            <button onclick="goToThisWeek()" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">今週</button>
            <button onclick="goToNextWeek()" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">次週 →</button>
        </div>
        
        <!-- 前期間比較ボタン -->
        <div style="text-align: center; margin-top: 10px;">
            <button onclick="togglePreviousPeriod()" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 14px;" id="togglePreviousPeriodBtn">📊 前期間と比較</button>
        </div>
        
        <!-- 前期間データ表示エリア -->
        <div id="previousPeriodArea" style="display: none; margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;">
            <h4 style="margin-top: 0; color: #495057;">📊 前期間データ比較</h4>
            <div id="previousPeriodData">読み込み中...</div>
        </div>
    </div>
</div>

<!-- データ履歴 -->
<div class="input-card" id="weightHistoryPanel">
    <h3>📈 データ履歴</h3>
    <div class="data-area" id="weightHistory">
        データを読み込み中...<br>
    </div>
</div>