<!-- 統合ダッシュボード - 全タブの要点集計表示 -->
<div class="dashboard-container">
    <h3>📊 統合ダッシュボード - 改善状況一覧</h3>
    
    <!-- タブ切り替えエリア -->
    <div class="dashboard-tab-switcher" style="margin-bottom: 20px; text-align: center;">
        <button id="dashOverviewBtn" onclick="switchDashboardView('overview')" style="background: #007bff; color: white; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">📋 全体概要</button>
        <button id="dashWeightBtn" onclick="switchDashboardView('weight')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">📊 体重詳細</button>
        <button id="dashSleepBtn" onclick="switchDashboardView('sleep')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">🛏️ 睡眠詳細</button>
        <button id="dashRoomBtn" onclick="switchDashboardView('room')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">🏠 片付け詳細</button>
        <button id="dashMemoBtn" onclick="switchDashboardView('memo')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">📝 メモ詳細</button>
    </div>

    <!-- 全体概要ビュー -->
    <div id="overviewView" class="dashboard-view">
        <div class="dashboard-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
            
            <!-- 体重管理サマリーカード -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #007bff; border-radius: 8px; padding: 15px;">
                <h4 style="color: #007bff; margin: 0 0 10px 0;">📊 体重管理</h4>
                <div id="weightSummary">
                    <div class="metric-item">総記録数: <span id="weightDataCount">--</span>件</div>
                    <div class="metric-item">最新体重: <span id="latestWeight">--</span>kg</div>
                    <div class="metric-item">前回差: <span id="weightDiff">--</span>kg</div>
                    <div class="metric-item">月間変化: <span id="monthlyChange">--</span>kg</div>
                    <div class="trend-indicator" id="weightTrend">傾向: 分析中...</div>
                </div>
            </div>

            <!-- 睡眠管理サマリーカード -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #6f42c1; border-radius: 8px; padding: 15px;">
                <h4 style="color: #6f42c1; margin: 0 0 10px 0;">🛏️ 睡眠管理</h4>
                <div id="sleepSummary">
                    <div class="metric-item">総記録数: <span id="sleepDataCount">--</span>件</div>
                    <div class="metric-item">平均睡眠時間: <span id="avgSleepTime">--</span>h</div>
                    <div class="metric-item">平均睡眠質: <span id="avgSleepQuality">--</span>/5</div>
                    <div class="metric-item">今月記録数: <span id="sleepRecords">--</span>回</div>
                    <div class="trend-indicator" id="sleepTrend">傾向: 分析中...</div>
                </div>
            </div>

            <!-- 部屋片付けサマリーカード -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #28a745; border-radius: 8px; padding: 15px;">
                <h4 style="color: #28a745; margin: 0 0 10px 0;">🏠 部屋片付け</h4>
                <div id="roomSummary">
                    <div class="metric-item">総記録数: <span id="roomDataCount">--</span>件</div>
                    <div class="metric-item">完了タスク: <span id="completedTasks">--</span>/<span id="totalTasks">--</span></div>
                    <div class="metric-item">完了率: <span id="completionRate">--</span>%</div>
                    <div class="metric-item">今月活動: <span id="monthlyActivity">--</span>回</div>
                    <div class="trend-indicator" id="roomTrend">傾向: 分析中...</div>
                </div>
            </div>

            <!-- メモリストサマリーカード -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #ffc107; border-radius: 8px; padding: 15px;">
                <h4 style="color: #e6a302; margin: 0 0 10px 0;">📝 メモリスト</h4>
                <div id="memoSummary">
                    <div class="metric-item">総記録数: <span id="memoDataCount">--</span>件</div>
                    <div class="metric-item">総メモ数: <span id="totalMemos">--</span></div>
                    <div class="metric-item">重要メモ: <span id="importantMemos">--</span></div>
                    <div class="metric-item">今月追加: <span id="monthlyMemos">--</span></div>
                    <div class="trend-indicator" id="memoTrend">傾向: 分析中...</div>
                </div>
            </div>
        </div>

        <!-- 週次データ活動状況 -->
        <div class="weekly-activity" style="background: #f8f9fa; border: 2px solid #007bff; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
            <h4 style="color: #007bff; margin: 0 0 15px 0;">📅 週次活動状況</h4>
            <div class="weekly-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                
                <!-- 体重管理週次データ -->
                <div class="weekly-card" style="background: rgba(0, 123, 255, 0.05); border: 1px solid rgba(0, 123, 255, 0.2); border-radius: 5px; padding: 10px;">
                    <div style="font-weight: bold; color: #007bff; font-size: 12px; margin-bottom: 8px;">📊 体重管理</div>
                    <div class="weekly-data" id="weightWeeklyData">
                        <div class="week-item">今週: <span id="weightThisWeek">--</span>件</div>
                        <div class="week-item">先週: <span id="weightLastWeek">--</span>件</div>
                        <div class="week-item">今月: <span id="weightThisMonth">--</span>件</div>
                    </div>
                </div>

                <!-- 睡眠管理週次データ -->
                <div class="weekly-card" style="background: rgba(111, 66, 193, 0.05); border: 1px solid rgba(111, 66, 193, 0.2); border-radius: 5px; padding: 10px;">
                    <div style="font-weight: bold; color: #6f42c1; font-size: 12px; margin-bottom: 8px;">🛏️ 睡眠管理</div>
                    <div class="weekly-data" id="sleepWeeklyData">
                        <div class="week-item">今週: <span id="sleepThisWeek">--</span>件</div>
                        <div class="week-item">先週: <span id="sleepLastWeek">--</span>件</div>
                        <div class="week-item">今月: <span id="sleepThisMonth">--</span>件</div>
                    </div>
                </div>

                <!-- 部屋片付け週次データ -->
                <div class="weekly-card" style="background: rgba(40, 167, 69, 0.05); border: 1px solid rgba(40, 167, 69, 0.2); border-radius: 5px; padding: 10px;">
                    <div style="font-weight: bold; color: #28a745; font-size: 12px; margin-bottom: 8px;">🏠 部屋片付け</div>
                    <div class="weekly-data" id="roomWeeklyData">
                        <div class="week-item">今週: <span id="roomThisWeek">--</span>件</div>
                        <div class="week-item">先週: <span id="roomLastWeek">--</span>件</div>
                        <div class="week-item">今月: <span id="roomThisMonth">--</span>件</div>
                    </div>
                </div>

                <!-- メモリスト週次データ -->
                <div class="weekly-card" style="background: rgba(255, 193, 7, 0.05); border: 1px solid rgba(255, 193, 7, 0.2); border-radius: 5px; padding: 10px;">
                    <div style="font-weight: bold; color: #e6a302; font-size: 12px; margin-bottom: 8px;">📝 メモリスト</div>
                    <div class="weekly-data" id="memoWeeklyData">
                        <div class="week-item">今週: <span id="memoThisWeek">--</span>件</div>
                        <div class="week-item">先週: <span id="memoLastWeek">--</span>件</div>
                        <div class="week-item">今月: <span id="memoThisMonth">--</span>件</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 全体的な改善傾向表示 -->
        <div class="overall-progress" style="background: #e8f5e8; border: 2px solid #28a745; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
            <h4 style="color: #155724; margin: 0 0 10px 0;">🎯 総合改善状況</h4>
            <div id="overallTrendAnalysis">
                <div id="improvementScore" style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">改善スコア: 計算中...</div>
                <div id="improvementDetails"></div>
            </div>
        </div>
    </div>

    <!-- 個別詳細ビュー（各タブ用） -->
    <div id="weightView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #007bff; border-radius: 8px; padding: 20px;">
            <h4 style="color: #007bff;">📊 体重管理 - 詳細分析</h4>
            <div id="weightDetailContent">
                <canvas id="weightTrendChart" width="400" height="200"></canvas>
                <div id="weightAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <div id="sleepView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #6f42c1; border-radius: 8px; padding: 20px;">
            <h4 style="color: #6f42c1;">🛏️ 睡眠管理 - 詳細分析</h4>
            <div id="sleepDetailContent">
                <canvas id="sleepTrendChart" width="400" height="200"></canvas>
                <div id="sleepAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <div id="roomView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #28a745; border-radius: 8px; padding: 20px;">
            <h4 style="color: #28a745;">🏠 部屋片付け - 詳細分析</h4>
            <div id="roomDetailContent">
                <div id="roomProgressChart"></div>
                <div id="roomAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <div id="memoView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #ffc107; border-radius: 8px; padding: 20px;">
            <h4 style="color: #e6a302;">📝 メモリスト - 詳細分析</h4>
            <div id="memoDetailContent">
                <div id="memoCategoryChart"></div>
                <div id="memoAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <!-- データ更新・コピー機能 -->
    <div style="text-align: center; margin-top: 20px;">
        <button onclick="refreshDashboardData()" style="background: #17a2b8; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">🔄 データ更新</button>
        <button class="universal-copy-btn" onclick="copyDashboardData()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">📋 サマリーをコピー</button>
        <button onclick="exportTrendData()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">📊 詳細データエクスポート</button>
    </div>
</div>

<style>
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 10px;
}

.metric-item {
    margin: 5px 0;
    font-size: 13px;
}

.trend-indicator {
    margin-top: 8px;
    padding: 5px;
    border-radius: 3px;
    font-size: 12px;
    font-weight: bold;
}

.trend-up {
    background: #d4edda;
    color: #155724;
}

.trend-down {
    background: #f8d7da;
    color: #721c24;
}

.trend-stable {
    background: #e2e6ea;
    color: #6c757d;
}

.dashboard-view.hidden {
    display: none;
}
</style>