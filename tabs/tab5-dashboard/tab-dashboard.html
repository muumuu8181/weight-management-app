<!-- çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - å…¨ã‚¿ãƒ–ã®è¦ç‚¹é›†è¨ˆè¡¨ç¤º -->
<div class="dashboard-container">
    <h3>ğŸ“Š çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - æ”¹å–„çŠ¶æ³ä¸€è¦§</h3>
    
    <!-- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚¨ãƒªã‚¢ -->
    <div class="dashboard-tab-switcher" style="margin-bottom: 20px; text-align: center;">
        <button id="dashOverviewBtn" onclick="switchDashboardView('overview')" style="background: #007bff; color: white; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ“‹ å…¨ä½“æ¦‚è¦</button>
        <button id="dashWeightBtn" onclick="switchDashboardView('weight')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ“Š ä½“é‡è©³ç´°</button>
        <button id="dashSleepBtn" onclick="switchDashboardView('sleep')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ›ï¸ ç¡çœ è©³ç´°</button>
        <button id="dashRoomBtn" onclick="switchDashboardView('room')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ  ç‰‡ä»˜ã‘è©³ç´°</button>
        <button id="dashMemoBtn" onclick="switchDashboardView('memo')" style="background: #f8f9fa; color: #495057; border: none; padding: 8px 15px; margin: 2px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ“ ãƒ¡ãƒ¢è©³ç´°</button>
    </div>

    <!-- å…¨ä½“æ¦‚è¦ãƒ“ãƒ¥ãƒ¼ -->
    <div id="overviewView" class="dashboard-view">
        <div class="dashboard-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
            
            <!-- ä½“é‡ç®¡ç†ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #007bff; border-radius: 8px; padding: 15px;">
                <h4 style="color: #007bff; margin: 0 0 10px 0;">ğŸ“Š ä½“é‡ç®¡ç†</h4>
                <div id="weightSummary">
                    <div class="metric-item">æœ€æ–°ä½“é‡: <span id="latestWeight">--</span>kg</div>
                    <div class="metric-item">å‰å›å·®: <span id="weightDiff">--</span>kg</div>
                    <div class="metric-item">æœˆé–“å¤‰åŒ–: <span id="monthlyChange">--</span>kg</div>
                    <div class="trend-indicator" id="weightTrend">å‚¾å‘: åˆ†æä¸­...</div>
                </div>
            </div>

            <!-- ç¡çœ ç®¡ç†ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #6f42c1; border-radius: 8px; padding: 15px;">
                <h4 style="color: #6f42c1; margin: 0 0 10px 0;">ğŸ›ï¸ ç¡çœ ç®¡ç†</h4>
                <div id="sleepSummary">
                    <div class="metric-item">å¹³å‡ç¡çœ æ™‚é–“: <span id="avgSleepTime">--</span>h</div>
                    <div class="metric-item">å¹³å‡ç¡çœ è³ª: <span id="avgSleepQuality">--</span>/5</div>
                    <div class="metric-item">ä»Šæœˆè¨˜éŒ²æ•°: <span id="sleepRecords">--</span>å›</div>
                    <div class="trend-indicator" id="sleepTrend">å‚¾å‘: åˆ†æä¸­...</div>
                </div>
            </div>

            <!-- éƒ¨å±‹ç‰‡ä»˜ã‘ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #28a745; border-radius: 8px; padding: 15px;">
                <h4 style="color: #28a745; margin: 0 0 10px 0;">ğŸ  éƒ¨å±‹ç‰‡ä»˜ã‘</h4>
                <div id="roomSummary">
                    <div class="metric-item">å®Œäº†ã‚¿ã‚¹ã‚¯: <span id="completedTasks">--</span>/<span id="totalTasks">--</span></div>
                    <div class="metric-item">å®Œäº†ç‡: <span id="completionRate">--</span>%</div>
                    <div class="metric-item">ä»Šæœˆæ´»å‹•: <span id="monthlyActivity">--</span>å›</div>
                    <div class="trend-indicator" id="roomTrend">å‚¾å‘: åˆ†æä¸­...</div>
                </div>
            </div>

            <!-- ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ -->
            <div class="summary-card" style="background: #f8f9fa; border: 2px solid #ffc107; border-radius: 8px; padding: 15px;">
                <h4 style="color: #e6a302; margin: 0 0 10px 0;">ğŸ“ ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆ</h4>
                <div id="memoSummary">
                    <div class="metric-item">ç·ãƒ¡ãƒ¢æ•°: <span id="totalMemos">--</span></div>
                    <div class="metric-item">é‡è¦ãƒ¡ãƒ¢: <span id="importantMemos">--</span></div>
                    <div class="metric-item">ä»Šæœˆè¿½åŠ : <span id="monthlyMemos">--</span></div>
                    <div class="trend-indicator" id="memoTrend">å‚¾å‘: åˆ†æä¸­...</div>
                </div>
            </div>
        </div>

        <!-- å…¨ä½“çš„ãªæ”¹å–„å‚¾å‘è¡¨ç¤º -->
        <div class="overall-progress" style="background: #e8f5e8; border: 2px solid #28a745; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
            <h4 style="color: #155724; margin: 0 0 10px 0;">ğŸ¯ ç·åˆæ”¹å–„çŠ¶æ³</h4>
            <div id="overallTrendAnalysis">
                <div id="improvementScore" style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">æ”¹å–„ã‚¹ã‚³ã‚¢: è¨ˆç®—ä¸­...</div>
                <div id="improvementDetails"></div>
            </div>
        </div>
    </div>

    <!-- å€‹åˆ¥è©³ç´°ãƒ“ãƒ¥ãƒ¼ï¼ˆå„ã‚¿ãƒ–ç”¨ï¼‰ -->
    <div id="weightView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #007bff; border-radius: 8px; padding: 20px;">
            <h4 style="color: #007bff;">ğŸ“Š ä½“é‡ç®¡ç† - è©³ç´°åˆ†æ</h4>
            <div id="weightDetailContent">
                <canvas id="weightTrendChart" width="400" height="200"></canvas>
                <div id="weightAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <div id="sleepView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #6f42c1; border-radius: 8px; padding: 20px;">
            <h4 style="color: #6f42c1;">ğŸ›ï¸ ç¡çœ ç®¡ç† - è©³ç´°åˆ†æ</h4>
            <div id="sleepDetailContent">
                <canvas id="sleepTrendChart" width="400" height="200"></canvas>
                <div id="sleepAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <div id="roomView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #28a745; border-radius: 8px; padding: 20px;">
            <h4 style="color: #28a745;">ğŸ  éƒ¨å±‹ç‰‡ä»˜ã‘ - è©³ç´°åˆ†æ</h4>
            <div id="roomDetailContent">
                <div id="roomProgressChart"></div>
                <div id="roomAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <div id="memoView" class="dashboard-view hidden">
        <div class="detail-card" style="background: #f8f9fa; border: 2px solid #ffc107; border-radius: 8px; padding: 20px;">
            <h4 style="color: #e6a302;">ğŸ“ ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆ - è©³ç´°åˆ†æ</h4>
            <div id="memoDetailContent">
                <div id="memoCategoryChart"></div>
                <div id="memoAnalysisText" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <!-- ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ»ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ -->
    <div style="text-align: center; margin-top: 20px;">
        <button onclick="refreshDashboardData()" style="background: #17a2b8; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">ğŸ”„ ãƒ‡ãƒ¼ã‚¿æ›´æ–°</button>
        <button class="universal-copy-btn" onclick="copyDashboardData()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">ğŸ“‹ ã‚µãƒãƒªãƒ¼ã‚’ã‚³ãƒ”ãƒ¼</button>
        <button onclick="exportTrendData()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">ğŸ“Š è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
    </div>
</div>

<style>
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 10px;
}

.metric-item {
    margin: 5px 0;
    font-size: 13px;
}

.trend-indicator {
    margin-top: 8px;
    padding: 5px;
    border-radius: 3px;
    font-size: 12px;
    font-weight: bold;
}

.trend-up {
    background: #d4edda;
    color: #155724;
}

.trend-down {
    background: #f8d7da;
    color: #721c24;
}

.trend-stable {
    background: #e2e6ea;
    color: #6c757d;
}

.dashboard-view.hidden {
    display: none;
}
</style>