<!-- JOB_DC タスク管理・キャリア形成タブ -->

<!-- メモリスト式タスク管理（メイン機能） -->
<div class="input-card" style="border: 2px solid #28a745; background: #f8fff8;">
    <h3>🎯 メモリスト式タスク管理</h3>
    <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
        ✨ 階層化・統合・細分化・編集・タグ・締切・ソート・フィルター機能付きの完全なタスク管理システム
    </p>
    
    <!-- メモリスト式タスクマネージャー -->
    <div id="jobMemoTaskManager"></div>
</div>

<!-- 従来のJOB_DC機能（既存システム） -->
<div class="input-card" style="border: 1px solid #ddd; background: #f9f9f9;">
    <h3>💼 従来のJOB_DC機能</h3>
    <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
        📊 スキル分類・作業時間・自動化目標に特化したシステム（既存機能維持）
    </p>

<!-- タスク追加エリア -->
<div class="input-card" id="jobTaskInput">
    <h3>💼 JOB_DC タスク管理</h3>
    
    <!-- タスク入力フォーム -->
    <div style="margin-bottom: 15px;">
        <textarea id="newTaskText" placeholder="タスク内容を入力..." 
            style="width: 100%; max-width: 600px; height: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; resize: vertical; font-family: inherit; font-size: 14px; line-height: 1.4;"></textarea>
    </div>

    <!-- スキル分類選択 -->
    <div style="margin-bottom: 15px;">
        <label style="font-weight: bold; display: block; margin-bottom: 8px;">🎯 スキル分類:</label>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <button type="button" class="skill-btn" data-skill="" onclick="selectSkillType('')" style="background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 1;">未分類</button>
            <button type="button" class="skill-btn" data-skill="案件固有" onclick="selectSkillType('案件固有')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🔴 案件固有</button>
            <button type="button" class="skill-btn" data-skill="市場汎用" onclick="selectSkillType('市場汎用')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🟢 市場汎用</button>
            <button type="button" class="skill-btn" data-skill="自動化推進" onclick="selectSkillType('自動化推進')" style="background: #ffc107; color: #212529; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🟡 自動化推進</button>
        </div>
        <input type="hidden" id="taskSkillType" value="">
    </div>

    <!-- タグ選択（複数選択可） -->
    <div style="margin-bottom: 15px;">
        <label style="font-weight: bold; display: block; margin-bottom: 8px;">🏷️ タグ (複数選択可):</label>
        <div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center;">
            <div id="tagButtons" style="display: flex; gap: 6px; flex-wrap: wrap;">
                <button type="button" class="tag-btn" data-value="緊急" onclick="tagSelector.toggleMultiple('緊急')" style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px; opacity: 0.7;">🚨 緊急</button>
                <button type="button" class="tag-btn" data-value="重要" onclick="tagSelector.toggleMultiple('重要')" style="background: #fd7e14; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px; opacity: 0.7;">⭐ 重要</button>
                <button type="button" class="tag-btn" data-value="定期" onclick="tagSelector.toggleMultiple('定期')" style="background: #17a2b8; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px; opacity: 0.7;">🔄 定期</button>
                <button type="button" class="tag-btn" data-value="新規" onclick="tagSelector.toggleMultiple('新規')" style="background: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px; opacity: 0.7;">✨ 新規</button>
                <button type="button" class="tag-btn" data-value="改善" onclick="tagSelector.toggleMultiple('改善')" style="background: #6f42c1; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px; opacity: 0.7;">🔧 改善</button>
            </div>
            <button type="button" onclick="showTagAddInput()" style="background: #ffc107; color: #212529; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px;">➕ 追加</button>
        </div>
        <input type="hidden" id="selectedTags" value="">
        
        <!-- 選択中タグ表示 -->
        <div id="selectedTagsDisplay" style="font-size: 11px; color: #666; margin-top: 5px;">選択中: なし</div>
        
        <!-- タグ追加入力エリア -->
        <div id="tagAddInput" style="display: none; margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px;">
            <div style="display: flex; gap: 8px; align-items: center;">
                <input type="text" id="newTagName" placeholder="新しいタグ名を入力" style="flex: 1; padding: 6px; border: 1px solid #ffc107; border-radius: 3px; font-size: 11px;">
                <button onclick="addNewTag()" style="background: #ffc107; color: #212529; border: none; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 11px;">✓ 追加</button>
                <button onclick="cancelTagAdd()" style="background: #6c757d; color: white; border: none; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 11px;">✗ キャンセル</button>
            </div>
        </div>
    </div>

    <!-- 重要度選択 -->
    <div style="margin-bottom: 15px;">
        <label style="font-weight: bold; display: block; margin-bottom: 8px;">📊 重要度:</label>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <button type="button" class="priority-btn" data-priority="" onclick="selectTaskPriority('')" style="background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 1;">なし</button>
            <button type="button" class="priority-btn" data-priority="S" onclick="selectTaskPriority('S')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🔥 S</button>
            <button type="button" class="priority-btn" data-priority="A" onclick="selectTaskPriority('A')" style="background: #fd7e14; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">⚡ A</button>
            <button type="button" class="priority-btn" data-priority="B" onclick="selectTaskPriority('B')" style="background: #ffc107; color: #212529; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">📋 B</button>
        </div>
        <input type="hidden" id="taskPriority" value="">
    </div>

    <!-- 予想工数選択 -->
    <div style="margin-bottom: 15px;">
        <label style="font-weight: bold; display: block; margin-bottom: 8px;">⏰ 予想工数:</label>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <button type="button" class="time-btn" data-time="" onclick="selectEstimatedTime('')" style="background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 1;">未設定</button>
            <button type="button" class="time-btn" data-time="5分" onclick="selectEstimatedTime('5分')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">⚡ 5分</button>
            <button type="button" class="time-btn" data-time="30分" onclick="selectEstimatedTime('30分')" style="background: #17a2b8; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">📅 30分</button>
            <button type="button" class="time-btn" data-time="1時間" onclick="selectEstimatedTime('1時間')" style="background: #fd7e14; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🕐 1時間</button>
            <button type="button" class="time-btn" data-time="半日" onclick="selectEstimatedTime('半日')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">📆 半日</button>
        </div>
        <input type="hidden" id="taskEstimatedTime" value="">
    </div>

    <!-- 自動化目標 -->
    <div style="margin-bottom: 15px;">
        <label style="font-weight: bold; display: block; margin-bottom: 8px;">🎯 自動化目標:</label>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <button type="button" class="automation-btn" data-automation="" onclick="selectAutomationGoal('')" style="background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 1;">対象外</button>
            <button type="button" class="automation-btn" data-automation="即削除" onclick="selectAutomationGoal('即削除')" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🗑️ 即削除</button>
            <button type="button" class="automation-btn" data-automation="1分目標" onclick="selectAutomationGoal('1分目標')" style="background: #fd7e14; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">⏱️ 1分目標</button>
            <button type="button" class="automation-btn" data-automation="0分目標" onclick="selectAutomationGoal('0分目標')" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; opacity: 0.7;">🎯 0分目標</button>
        </div>
        <input type="hidden" id="taskAutomationGoal" value="">
    </div>

    <!-- 保存ボタン -->
    <button class="save-button" onclick="saveJobTask()">💾 タスク保存</button>
</div>

<!-- 作業時間トラッキング -->
<div class="input-card" id="workTimeTracker">
    <h3>⏱️ 作業時間トラッキング</h3>
    <div id="timeTrackerContainer"></div>
</div>

<!-- キャリア分析パネル -->
<div class="input-card" id="careerAnalysisPanel">
    <h3>📈 キャリア分析</h3>
    
    <!-- 今日の作業時間統計 -->
    <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
        <h4 style="margin-top: 0; color: #495057;">📊 今日の作業時間統計</h4>
        <div id="todayStats">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span>🔴 案件固有作業:</span>
                <span id="todayProjectSpecific" style="font-weight: bold; color: #dc3545;">0分</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span>🟢 市場汎用作業:</span>
                <span id="todayMarketable" style="font-weight: bold; color: #28a745;">0分</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span>🟡 自動化推進:</span>
                <span id="todayAutomation" style="font-weight: bold; color: #ffc107;">0分</span>
            </div>
            <hr style="margin: 10px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="font-weight: bold;">📈 キャリア価値向上度:</span>
                <span id="careerValueScore" style="font-weight: bold; font-size: 18px; color: #007bff;">85%</span>
            </div>
        </div>
    </div>

    <!-- 自動化進捗 -->
    <div style="margin-bottom: 20px; padding: 15px; background: #fff3cd; border-radius: 8px;">
        <h4 style="margin-top: 0; color: #856404;">🎯 自動化進捗</h4>
        <div id="automationProgress">
            <div style="margin-bottom: 10px;">
                <span>今月の案件固有作業削減:</span>
                <div style="background: #e9ecef; height: 20px; border-radius: 10px; margin: 5px 0;">
                    <div id="reductionProgress" style="background: #28a745; height: 100%; width: 60%; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">-60%</div>
                </div>
            </div>
            <div style="font-size: 12px; color: #666;">
                目標: 毎日の案件作業を1分以内に短縮
            </div>
        </div>
    </div>
</div>

<!-- タスク一覧 -->
<div class="input-card" id="jobTaskList">
    <h3>📋 タスク一覧</h3>
    
    <!-- フィルター -->
    <div style="margin-bottom: 15px; display: flex; gap: 8px; flex-wrap: wrap;">
        <button onclick="filterTasks('all')" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">全て</button>
        <button onclick="filterTasks('案件固有')" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">🔴 案件固有</button>
        <button onclick="filterTasks('市場汎用')" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">🟢 市場汎用</button>
        <button onclick="filterTasks('自動化推進')" style="background: #ffc107; color: #212529; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">🟡 自動化推進</button>
    </div>
    
    <div class="data-area" id="jobTaskHistory">
        データを読み込み中...<br>
    </div>
</div>
</div>