<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬å‹•ä½œç¢ºèª</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        button { margin: 5px; padding: 8px 15px; }
        #logArea { 
            background: #f5f5f5; 
            padding: 10px; 
            margin: 10px 0;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œç¢ºèª</h1>
    
    <div class="test-section">
        <h2>1. åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testBasicLog()">log()é–¢æ•°ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testConsoleLog()">console.logãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testErrorLog()">ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testMultipleArgs()">è¤‡æ•°å¼•æ•°ãƒ†ã‚¹ãƒˆ</button>
    </div>
    
    <div class="test-section">
        <h2>2. äº’æ›æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹</h2>
        <button onclick="checkCompatibilityStatus()">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª</button>
        <button onclick="checkHealth()">ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯</button>
        <button onclick="resetStats()">çµ±è¨ˆãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    
    <div class="test-section">
        <h2>3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="runQuickPerformanceTest()">ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆ100å›ï¼‰</button>
        <div id="performanceResult"></div>
    </div>
    
    <div class="test-section">
        <h2>ãƒ­ã‚°å‡ºåŠ›ã‚¨ãƒªã‚¢</h2>
        <div id="logArea"></div>
    </div>
    
    <div id="testResults"></div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿ -->
    <script src="shared/utils/logging.js"></script>
    <script src="shared/utils/universal-logger.js"></script>
    <script src="shared/utils/logging-compatibility.js"></script>
    
    <script>
        function showResult(message, isSuccess = true) {
            const resultsDiv = document.getElementById('testResults');
            const div = document.createElement('div');
            div.className = isSuccess ? 'success' : 'error';
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            resultsDiv.appendChild(div);
        }
        
        function testBasicLog() {
            try {
                log('âœ… åŸºæœ¬çš„ãªlog()é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ');
                showResult('log()é–¢æ•°: æ­£å¸¸å‹•ä½œ');
            } catch (e) {
                showResult('log()é–¢æ•°: ã‚¨ãƒ©ãƒ¼ - ' + e.message, false);
            }
        }
        
        function testConsoleLog() {
            try {
                console.log('ğŸ“Š console.logã®ãƒ†ã‚¹ãƒˆ');
                showResult('console.log: æ­£å¸¸å‹•ä½œ');
            } catch (e) {
                showResult('console.log: ã‚¨ãƒ©ãƒ¼ - ' + e.message, false);
            }
        }
        
        function testErrorLog() {
            try {
                console.error('âŒ console.errorã®ãƒ†ã‚¹ãƒˆ');
                log('âš ï¸ è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆ');
                showResult('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°: æ­£å¸¸å‹•ä½œ');
            } catch (e) {
                showResult('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°: ã‚¨ãƒ©ãƒ¼ - ' + e.message, false);
            }
        }
        
        function testMultipleArgs() {
            try {
                log('è¤‡æ•°å¼•æ•°ãƒ†ã‚¹ãƒˆ:', 123, { key: 'value' }, [1, 2, 3]);
                showResult('è¤‡æ•°å¼•æ•°: æ­£å¸¸å‹•ä½œ');
            } catch (e) {
                showResult('è¤‡æ•°å¼•æ•°: ã‚¨ãƒ©ãƒ¼ - ' + e.message, false);
            }
        }
        
        function checkCompatibilityStatus() {
            if (window.LoggingCompatibility) {
                const status = {
                    version: window.LoggingCompatibility.version,
                    initialized: window.LoggingCompatibility.initialized,
                    stats: window.LoggingCompatibility.stats
                };
                log('ğŸ” äº’æ›æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:');
                log(JSON.stringify(status, null, 2));
                showResult('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª: å®Œäº†');
            } else {
                showResult('äº’æ›æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', false);
            }
        }
        
        function checkHealth() {
            if (window.LoggingCompatibility && window.LoggingCompatibility.checkHealth) {
                const health = window.LoggingCompatibility.checkHealth();
                log('ğŸ¥ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯çµæœ:');
                log(JSON.stringify(health, null, 2));
                showResult(`ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: ${health.status}`);
            } else {
                showResult('ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“', false);
            }
        }
        
        function resetStats() {
            if (window.LoggingCompatibility && window.LoggingCompatibility.resetStats) {
                window.LoggingCompatibility.resetStats();
                log('ğŸ”„ çµ±è¨ˆã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
                showResult('çµ±è¨ˆãƒªã‚»ãƒƒãƒˆ: å®Œäº†');
            } else {
                showResult('ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“', false);
            }
        }
        
        function runQuickPerformanceTest() {
            const iterations = 100;
            const start = performance.now();
            
            for (let i = 0; i < iterations; i++) {
                log(`Performance test ${i}`);
            }
            
            const end = performance.now();
            const duration = end - start;
            const avgTime = duration / iterations;
            
            const resultDiv = document.getElementById('performanceResult');
            resultDiv.innerHTML = `
                <p>å®Ÿè¡Œæ™‚é–“: ${duration.toFixed(2)}ms</p>
                <p>å¹³å‡æ™‚é–“: ${avgTime.toFixed(4)}ms/log</p>
                <p>å‡¦ç†é€Ÿåº¦: ${((iterations / duration) * 1000).toFixed(0)} logs/sec</p>
            `;
            
            showResult('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ: å®Œäº†');
        }
        
        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸãƒã‚§ãƒƒã‚¯
        window.addEventListener('DOMContentLoaded', () => {
            if (window.LoggingCompatibility) {
                showResult(`âœ… ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ äº’æ›æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼ v${window.LoggingCompatibility.version} æ¤œå‡º`);
            } else {
                showResult('âŒ äº’æ›æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“', false);
            }
            
            if (window.log) {
                showResult('âœ… log()é–¢æ•°ãŒåˆ©ç”¨å¯èƒ½');
            } else {
                showResult('âŒ log()é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', false);
            }
            
            if (window.UniversalLogger) {
                showResult('âœ… UniversalLoggerãŒåˆ©ç”¨å¯èƒ½');
            } else {
                showResult('âŒ UniversalLoggerãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', false);
            }
        });
    </script>
</body>
</html>