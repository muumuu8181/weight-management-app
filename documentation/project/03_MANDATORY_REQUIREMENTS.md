# 🚨 必須要件 - 絶対に遵守すること

## 📋 開発者への絶対必須事項

### ⚠️ **警告: この要件は絶対に変更・回避・無視してはいけません**

以下の4つの要件は、技術的困難や個人的な判断により変更することは**厳格に禁止**されています。

---

## 🔥 必須要件 1: Firebase Database 必須使用

### ✅ **必須事項**
- Firebase Realtime Database または Firestore を**必ず**使用すること
- すべてのデータ保存・読み込みはFirebase経由で行うこと
- データベース接続は自動設定されており、変更禁止

### ❌ **禁止事項**
- LocalStorage への変更は**絶対禁止**
- 「技術的に困難」を理由とした回避は**不可**
- 「デモモード」への変更は**仕様違反**
- その他の代替手段への変更は**すべて禁止**

### 🔍 **検証方法**
```javascript
// 自動検証: LocalStorage使用の検出
if (localStorage.length > 0) {
    throw new Error('Firebase回避検出 - LocalStorage使用は仕様違反');
}
```

---

## 🔐 必須要件 2: Google認証 必須実装

### ✅ **必須事項**
- Firebase Authentication + Google OAuth を**必ず**実装すること
- ユーザーログイン機能は Google認証 のみ使用
- 匿名認証も可（Firebase Authentication経由のみ）

### ❌ **禁止事項**
- 独自認証システムの実装は**禁止**
- 認証なしモードへの変更は**禁止**
- 「認証が難しい」を理由とした省略は**不可**

### 🔍 **検証方法**
```javascript
// 自動検証: Google認証の確認
import { getAuth } from 'firebase/auth';
const auth = getAuth();
if (!auth) {
    throw new Error('Google認証未実装 - 仕様違反');
}
```

---

## 🧪 必須要件 3: テストツール動作確認必須

### ✅ **必須事項**
- 報告前に**必ず**テストツールで動作確認を実施すること
- Firebase接続テストを**必ず**実行すること
- Google認証ログインテストを**必ず**実施すること
- すべてのテスト結果をログで確認すること

### ❌ **禁止事項**
- テスト未実施での報告は**絶対禁止**
- 「動作しているはず」での報告は**不可**
- テスト失敗を隠しての報告は**仕様違反**

### 🔍 **実行コマンド**
```bash
# 必須実行コマンド
npm test                    # 全テスト実行
npm run test:firebase      # Firebase接続テスト
npm run test:auth         # Google認証テスト
npm run test:ui           # UI動作テスト
```

---

## 📋 必須要件 4: ログ機能・コピー機能絶対保持

### ✅ **必須事項**
- ログ出力機能を**絶対に除去してはいけません**
- コピーボタン機能を**絶対に除去してはいけません**
- ログはすべてコピー可能な状態を維持すること
- 実行ログ・エラーログ・デバッグログすべてにコピーボタン必須

### ❌ **禁止事項**
- 「不要だから」によるログ機能除去は**禁止**
- 「見た目が悪い」によるコピーボタン除去は**禁止**
- ログ機能の簡略化・省略は**すべて禁止**

### 🔍 **検証方法**
```javascript
// 自動検証: コピーボタンの存在確認
const copyButtons = document.querySelectorAll('.universal-copy-btn');
if (copyButtons.length === 0) {
    throw new Error('コピーボタン未実装 - 仕様違反');
}
```

---

## 🚫 必須要件 5: Core部分変更絶対禁止

### ✅ **必須事項**
- `universal-system/core/` 内のファイルは**絶対に変更禁止**
- `src/firebase-config.js` の設定変更は**禁止**
- `src/copy-system.js` の機能変更は**禁止**
- Core機能の「改善」「最適化」は**すべて禁止**

### ❌ **禁止事項**
- 「バグ修正」を理由とした Core変更は**禁止**
- 「性能向上」を理由とした Core変更は**禁止**
- 「使いやすさ向上」を理由とした Core変更は**禁止**

### 🔍 **保護方法**
```bash
# Core部分は読み取り専用
chmod 444 universal-system/core/*
chmod 444 src/firebase-config.js
chmod 444 src/copy-system.js
```

---

## 📊 必須確認チェックリスト

### 🚀 **開発完了前の必須確認**

- [ ] ✅ Firebase Database 接続・動作確認済み
- [ ] ✅ Google認証 ログイン・動作確認済み  
- [ ] ✅ テストツール全実行・合格確認済み
- [ ] ✅ ログ機能・コピーボタン動作確認済み
- [ ] ✅ Core部分 未変更確認済み
- [ ] ✅ LocalStorage使用なし確認済み
- [ ] ✅ 代替手段使用なし確認済み

### ❌ **1つでも未確認の場合は報告禁止**

---

## 🚨 **違反時の対応**

### 📋 **軽微な違反**
- テスト未実施 → 即座にテスト実行・結果提出
- ログ機能除去 → 即座に復旧・動作確認

### 🚫 **重大な違反**  
- Firebase → LocalStorage変更 → **プロジェクト差し戻し**
- Google認証省略 → **プロジェクト差し戻し**
- Core部分変更 → **プロジェクト差し戻し**

### ⚡ **緊急対応**
- 違反検出時は自動復旧システムが作動
- バックアップから自動復元
- 違反内容の詳細ログ記録

---

## 💡 **新人開発者への特別注意**

### 🎯 **Firebase Task Manager問題の再発防止**

この要件は、過去の事例で発生した以下の問題を防止するために設定されています：

1. **技術的困難による仕様変更** (Firebase → LocalStorage)
2. **要求無視による独自判断** (認証省略・デモモード化)
3. **テンプレート無視による自作** (Core機能の再実装)
4. **勝手な機能追加・除去** (ログ・コピー機能の変更)

### 🛡️ **防止策**

- **自動設定**: 技術的困難を除去
- **仕様固定**: 変更不可能な構造
- **自動テスト**: 違反を即座に検出
- **完成品提供**: 自作する必要を除去

---

## 📞 **質問・相談について**

### ✅ **相談OK事項**
- 要件を満たした上での機能追加
- UI/UXの改善（Core部分以外）
- パフォーマンス最適化（Core部分以外）

### ❌ **相談不可事項**
- 必須要件の変更・回避・省略
- 「技術的に困難」による代替案
- Core部分の変更・改善

---

## 🎉 **要件遵守での開発成功を祈ります！**

**この要件に従えば、100%確実に動作するアプリケーションが完成します。**

**技術的困難は自動解決システムが対応し、「よっぽどの馬鹿でも」確実に成功できます。**