# ✅ AI開発者チェックリスト - 恒常作業用

## 🚨 機能追加・修正時の必須手順

### 📋 **Step 1: 作業前チェック**

#### 🔍 現状確認
- [ ] **未解決問題確認**: `issues/`フォルダの現在の問題を把握
- [ ] **現在バージョン確認**: `index.html`の`APP_VERSION`を確認
- [ ] **Git状態確認**: `git status`で作業ブランチ確認
- [ ] **Firebase接続確認**: ログイン機能が正常動作するか確認

#### 📚 必須ドキュメント再読
- [ ] **MANDATORY_REQUIREMENTS.md**: 絶対遵守事項の再確認
- [ ] **PROJECT_OVERVIEW.md**: プロジェクト構造の把握
- [ ] **該当issue文書**: 修正対象の問題詳細確認

---

### 📋 **Step 2: 実装中チェック**

#### 🚫 禁止事項確認
- [ ] **Core部分未変更**: `core/`、`src/firebase-config.js`、`universal-system/`に触っていない
- [ ] **Firebase必須使用**: LocalStorageや代替手段を使用していない
- [ ] **Google認証保持**: 認証機能を省略・変更していない
- [ ] **ログ・コピー機能保持**: 機能を除去していない

#### 💡 実装ベストプラクティス
- [ ] **既存機能保護**: 新機能が既存機能に悪影響を与えていない
- [ ] **段階的変更**: 小さな変更を積み重ねている
- [ ] **詳細ログ出力**: `log()`でデバッグ情報を出力
- [ ] **エラーハンドリング**: try-catch で例外処理実装

---

### 📋 **Step 3: テスト実行** 🧪

#### 必須テスト（全て合格必須）
```bash
# 基本テスト実行
npm test                    # 全テスト実行
npm run test:firebase      # Firebase接続テスト  
npm run test:auth         # Google認証テスト
npm run test:ui           # UI動作テスト
```

#### ブラウザテスト
- [ ] **Google認証ログイン**: 実際にログイン・ログアウト動作確認
- [ ] **データ保存・読込**: Firebase Database でのCRUD操作確認
- [ ] **既存機能動作**: 全タブ・全機能が正常動作する
- [ ] **レスポンシブ確認**: デスクトップ・モバイルで表示確認

#### 問題修正時の特別テスト
**前期間ボタン問題の場合**:
- [ ] **データ取得確認**: `getPreviousPeriodData()`の戻り値確認
- [ ] **Chart.js確認**: `console.log(datasets)`でdatasets配列確認
- [ ] **グラフ表示確認**: 2本線（現在期間+前期間）が表示される

**睡眠タブ問題の場合**:
- [ ] **保存処理確認**: `saveSleepData()`の実行ログ確認
- [ ] **Firebase書き込み**: Firebase Consoleでデータ保存確認
- [ ] **履歴表示確認**: 保存後に記録履歴に表示される

---

### 📋 **Step 4: バージョンアップ** 📈

#### バージョン更新（必須）
- [ ] **APP_VERSION更新**: `index.html`で0.01刻みでバージョンアップ
  ```javascript
  const APP_VERSION = 'v0.XX';  // 前バージョンから+0.01
  ```

#### コミット・プッシュ
```bash
# 変更をステージング
git add .

# わかりやすいコミットメッセージ
git commit -m "feat: 機能説明 (vX.XX)"
# または
git commit -m "fix: 問題修正内容 (vX.XX)"

# GitHub にプッシュ
git push origin main
```

---

### 📋 **Step 5: デプロイ確認** 🚀

#### GitHub Actions確認
```bash
# ワークフロー実行確認（30秒以内に開始）
gh run list --limit 1

# ワークフロー完了監視
gh run watch

# 失敗時の詳細確認
gh run view --log
```

#### 実サイト動作確認（5-10分後）
- [ ] **サイトアクセス**: https://muumuu8181.github.io/weight-management-app/
- [ ] **ハードリロード**: `Ctrl+F5`でキャッシュクリア
- [ ] **バージョン確認**: 更新されたバージョンが表示される
- [ ] **実装機能確認**: 追加・修正した機能が正常動作
- [ ] **既存機能確認**: 全ての既存機能が影響を受けていない

---

### 📋 **Step 6: 完了報告** 📝

#### 報告前最終確認
- [ ] **全テスト合格**: ローカルテスト・ブラウザテスト全て成功
- [ ] **GitHub Pages反映**: 実サイトで変更が確認できる
- [ ] **問題解決確認**: 対象の問題が完全に解決している
- [ ] **副作用なし**: 他の機能に悪影響がない

#### 報告内容に含める情報
- [ ] **変更内容**: 何を実装・修正したか
- [ ] **バージョン**: 更新前 → 更新後のバージョン
- [ ] **テスト結果**: 全テスト合格の旨
- [ ] **URL**: GitHub Pages の実サイトURL
- [ ] **次の課題**: 他に残っている問題があるか

---

## 🚨 緊急時対応

### テスト失敗時
- **即座に修正**: 失敗したテストを修正してから次に進む
- **原因特定**: ログ・エラーメッセージで根本原因を確認
- **段階的修正**: 一度に多くを修正せず、1つずつ対応

### デプロイ失敗時
```bash
# ワークフロー再実行
gh workflow run "Deploy static content to Pages"

# 空コミットで強制トリガー
git commit --allow-empty -m "Trigger GitHub Pages"
git push origin main
```

### 重大な問題発見時
- **即座に停止**: さらなる変更を加えない
- **バックアップ復帰**: `index_backup_vXXX.html`から復旧
- **問題報告**: 詳細な状況をissueとして記録

---

## 💡 成功パターン

### ✅ 良い開発フロー
1. **小さく始める** → 大きな変更は段階的に分割
2. **頻繁なテスト** → 変更の都度テスト実行
3. **詳細なログ** → 問題発生時の調査を容易に
4. **確実な確認** → 推測ではなく実際の動作で判断

### ✅ 問題解決アプローチ
1. **問題の詳細把握** → issueフォルダの文書を熟読
2. **環境の確認** → Firebase・認証・デプロイ状況を確認
3. **段階的デバッグ** → ログ出力で問題箇所を特定
4. **最小修正** → 必要最小限の変更で解決

---

**🎯 このチェックリストを必ず順番通りに実行してください。**
**一つでも飛ばすと、問題が発生する可能性があります。**