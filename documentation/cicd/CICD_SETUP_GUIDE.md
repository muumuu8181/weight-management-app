# ğŸš€ CI/CD è¨­å®šã‚¬ã‚¤ãƒ‰ - ä½“é‡ç®¡ç†ã‚¢ãƒ—ãƒª

## ğŸ“‹ æ¦‚è¦

4äººãƒãƒ¼ãƒ é–‹ç™ºä½“åˆ¶ã§ã®å“è³ªä¿è¨¼ã¨ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–ã‚’å®Ÿç¾ã™ã‚‹CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é–‹ç™ºè€…A-D  â”‚â”€â”€â”€â–ºâ”‚ GitHub Repo â”‚â”€â”€â”€â–ºâ”‚GitHub Actionsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                   â”‚                   â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Pull Requestâ”‚    â”‚GitHub Pages â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ è¨­å®šæ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«

### 1. **CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `.github/workflows/ci.yml`
- **æ©Ÿèƒ½**:
  - ğŸ§ª å…¨ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆè‡ªå‹•å®Ÿè¡Œ
  - ğŸ” ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
  - ğŸ“Š PRåˆ†æãƒ¬ãƒãƒ¼ãƒˆ
  - ğŸš€ GitHub Pagesè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆmainãƒ–ãƒ©ãƒ³ãƒï¼‰
  - ğŸ”„ é€±æ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### 2. **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**  
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `.github/workflows/deploy.yml`
- **æ©Ÿèƒ½**:
  - ğŸ§¹ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  - âš¡ æœ¬ç•ªç’°å¢ƒæœ€é©åŒ–
  - ğŸ“Š ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±ç”Ÿæˆ

### 3. **é™¤å¤–è¨­å®š**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `.gitignore` 
- **é™¤å¤–å¯¾è±¡**:
  - ãƒ†ã‚¹ãƒˆã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ãƒ•ã‚¡ã‚¤ãƒ« (`*test-evidence*.json`)
  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ« (`*.backup*`) 
  - ç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (`audit-report-*.json`)

## ğŸ“‹ GitHub ãƒªãƒã‚¸ãƒˆãƒªè¨­å®šæ‰‹é †

### Step 1: GitHub Pagesæœ‰åŠ¹åŒ–

1. **ãƒªãƒã‚¸ãƒˆãƒªè¨­å®š**ã¸ç§»å‹•
2. **Pages** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠ
3. **Source**: `GitHub Actions` ã‚’é¸æŠ
4. **ä¿å­˜**ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 2: ãƒ–ãƒ©ãƒ³ãƒä¿è­·ãƒ«ãƒ¼ãƒ«è¨­å®š

```bash
# è¨­å®šå¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒ: main, develop
Settings â†’ Branches â†’ Add rule

âœ… Require a pull request before merging
  âœ… Require approvals (1äºº)
  âœ… Dismiss stale PR approvals when new commits are pushed
  âœ… Require review from code owners

âœ… Require status checks to pass before merging  
  âœ… Require branches to be up to date before merging
  âœ… Status checks: 
    - test (CI/CD Pipeline)
    - quality (CI/CD Pipeline) 

âœ… Require linear history
âœ… Include administrators
```

### Step 3: å¿…è¦ãªSecretsè¨­å®š

```bash
# ç¾åœ¨ã¯ä¸è¦ï¼ˆå°†æ¥çš„ãªæ‹¡å¼µç”¨ï¼‰
Settings â†’ Secrets and variables â†’ Actions

# å°†æ¥è¨­å®šäºˆå®š:
SLACK_WEBHOOK_URL     # Slacké€šçŸ¥ç”¨
FIREBASE_TOKEN        # Firebase CLIç”¨
```

## ğŸ”„ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### **ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥**

```bash
main                    # ğŸš€ æœ¬ç•ªç”¨ï¼ˆè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
â”œâ”€â”€ develop            # ğŸ§ª çµ±åˆãƒ†ã‚¹ãƒˆç”¨  
â”œâ”€â”€ feature/weight-fix # ğŸ‘¤ é–‹ç™ºè€…A
â”œâ”€â”€ feature/sleep-ui   # ğŸ‘¤ é–‹ç™ºè€…B
â”œâ”€â”€ feature/chart-opt  # ğŸ‘¤ é–‹ç™ºè€…C
â””â”€â”€ hotfix/login-bug   # ğŸš¨ ç·Šæ€¥ä¿®æ­£
```

### **ä½œæ¥­æ‰‹é †**

1. **æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ**
   ```bash
   git checkout develop
   git pull origin develop
   git checkout -b feature/æ–°æ©Ÿèƒ½å
   ```

2. **é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ**
   ```bash
   # ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   npm test
   
   # ã‚³ãƒŸãƒƒãƒˆ
   git add .
   git commit -m "feat: æ–°æ©Ÿèƒ½è¿½åŠ "
   git push origin feature/æ–°æ©Ÿèƒ½å
   ```

3. **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ**
   - `feature/æ–°æ©Ÿèƒ½å` â†’ `develop`
   - è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ + PRåˆ†æãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
   - ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰¿èªå¾Œãƒãƒ¼ã‚¸

4. **ãƒªãƒªãƒ¼ã‚¹**ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤æ‹…å½“è€…ã®ã¿ï¼‰
   ```bash
   # develop â†’ main ãƒãƒ¼ã‚¸ã§GitHub Pagesè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
   ```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå†…å®¹

### **CIç’°å¢ƒã§ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆ**

| ãƒ†ã‚¹ãƒˆç¨®åˆ¥ | å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ | å†…å®¹ |
|---|---|---|
| ğŸ”¥ Firebase | `npm run test:firebase` | Firebaseæ¥ç¶šãƒ†ã‚¹ãƒˆ |
| ğŸ¯ UI | `npm run test:ui` | ãƒœã‚¿ãƒ³ãƒ»ãƒ•ã‚©ãƒ¼ãƒ å‹•ä½œãƒ†ã‚¹ãƒˆ |
| ğŸ’¾ Storage | `npm run test:storage` | ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ |
| âš–ï¸ Weight | `npm run test:weight` | ä½“é‡ç®¡ç†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ |
| ğŸ” Validation | `npm run test:field-validation` | å…¥åŠ›æ¤œè¨¼ãƒ†ã‚¹ãƒˆ |
| ğŸ”— Integration | `npm run test:integration` | HTML-JSçµ±åˆãƒ†ã‚¹ãƒˆ |

### **ãƒ†ã‚¹ãƒˆç’°å¢ƒ**

- **OS**: Ubuntu Latest
- **Node.js**: v18
- **ãƒ–ãƒ©ã‚¦ã‚¶**: Chrome, Firefoxï¼ˆMatrixå®Ÿè¡Œï¼‰
- **å®Ÿè¡Œç’°å¢ƒ**: ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰

## ğŸ“Š å“è³ªã‚²ãƒ¼ãƒˆ

### **ãƒãƒ¼ã‚¸æ¡ä»¶**

- âœ… **å…¨ãƒ†ã‚¹ãƒˆé€šéå¿…é ˆ**
- âœ… **1åä»¥ä¸Šã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰¿èª**
- âœ… **ãƒ–ãƒ©ãƒ³ãƒãŒæœ€æ–°çŠ¶æ…‹**
- âœ… **ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ¶ˆæ¸ˆã¿**

### **ãƒ‡ãƒ—ãƒ­ã‚¤æ¡ä»¶**

- âœ… **mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥**
- âœ… **CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æˆåŠŸ**
- âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚µã‚¤ã‚º < 100MB**

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **ã‚ˆãã‚ã‚‹å•é¡Œ**

1. **ãƒ†ã‚¹ãƒˆå¤±æ•—**
   ```bash
   # ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ç¢ºèª
   npm test
   
   # ãƒ­ã‚°ç¢ºèª
   cat npm-debug.log
   ```

2. **ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—** 
   ```bash
   # GitHub Actionsãƒ­ã‚°ç¢ºèª
   Actions ã‚¿ãƒ– â†’ å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’ ãƒ­ã‚°è¡¨ç¤º
   ```

3. **å®¹é‡ã‚ªãƒ¼ãƒãƒ¼**
   ```bash
   # å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª  
   find . -size +1M -not -path "./node_modules/*" -ls
   
   # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
   npm run cleanup
   ```

### **ç·Šæ€¥æ™‚å¯¾å¿œ**

```bash
# ğŸš¨ ç·Šæ€¥ä¿®æ­£ï¼ˆhotfixï¼‰
git checkout main
git checkout -b hotfix/ç·Šæ€¥ä¿®æ­£å
# ä¿®æ­£ä½œæ¥­
git push origin hotfix/ç·Šæ€¥ä¿®æ­£å
# hotfix â†’ main ç›´æ¥PR
```

## ğŸ“ˆ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### **ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ç¢ºèª**

- **URL**: https://muumuu8181.github.io/weight-management-app/
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: GitHub Actions ã‚¿ãƒ–ã§ç¢ºèª
- **ãƒ‡ãƒ—ãƒ­ã‚¤å±¥æ­´**: Environments â†’ github-pages

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**

- **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“**: ç›®æ¨™5åˆ†ä»¥å†…
- **ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚é–“**: ç›®æ¨™3åˆ†ä»¥å†…  
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚µã‚¤ã‚º**: ç›®æ¨™50MBä»¥ä¸‹

## ğŸ¯ ä»Šå¾Œã®æ”¹å–„è¨ˆç”»

### **ãƒ•ã‚§ãƒ¼ã‚º2: é«˜åº¦ãªå“è³ªç®¡ç†**
- ESLint/Prettierè¨­å®š
- ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–

### **ãƒ•ã‚§ãƒ¼ã‚º3: é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ **
- Slacké€šçŸ¥çµ±åˆ
- ãƒ¡ãƒ¼ãƒ«é€šçŸ¥è¨­å®š
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

è¨­å®šã«å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€GitHubã®Issueã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®`issues/`ãƒ•ã‚©ãƒ«ãƒ€ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚